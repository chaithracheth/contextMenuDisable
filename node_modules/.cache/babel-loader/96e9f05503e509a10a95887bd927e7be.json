{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as htmlService from './_deps/vscode-html-languageservice/htmlLanguageService.js';\nvar Uri = monaco.Uri;\nvar Range = monaco.Range; // --- diagnostics --- ---\n\nvar DiagnosticsAdapter =\n/** @class */\nfunction () {\n  function DiagnosticsAdapter(_languageId, _worker, defaults) {\n    var _this = this;\n\n    this._languageId = _languageId;\n    this._worker = _worker;\n    this._disposables = [];\n    this._listener = Object.create(null);\n\n    var onModelAdd = function (model) {\n      var modeId = model.getModeId();\n\n      if (modeId !== _this._languageId) {\n        return;\n      }\n\n      var handle;\n      _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\n        clearTimeout(handle);\n        handle = setTimeout(function () {\n          return _this._doValidate(model.uri, modeId);\n        }, 500);\n      });\n\n      _this._doValidate(model.uri, modeId);\n    };\n\n    var onModelRemoved = function (model) {\n      monaco.editor.setModelMarkers(model, _this._languageId, []);\n      var uriStr = model.uri.toString();\n      var listener = _this._listener[uriStr];\n\n      if (listener) {\n        listener.dispose();\n        delete _this._listener[uriStr];\n      }\n    };\n\n    this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\n\n    this._disposables.push(monaco.editor.onWillDisposeModel(function (model) {\n      onModelRemoved(model);\n    }));\n\n    this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\n      onModelRemoved(event.model);\n      onModelAdd(event.model);\n    }));\n\n    this._disposables.push(defaults.onDidChange(function (_) {\n      monaco.editor.getModels().forEach(function (model) {\n        if (model.getModeId() === _this._languageId) {\n          onModelRemoved(model);\n          onModelAdd(model);\n        }\n      });\n    }));\n\n    this._disposables.push({\n      dispose: function () {\n        for (var key in _this._listener) {\n          _this._listener[key].dispose();\n        }\n      }\n    });\n\n    monaco.editor.getModels().forEach(onModelAdd);\n  }\n\n  DiagnosticsAdapter.prototype.dispose = function () {\n    this._disposables.forEach(function (d) {\n      return d && d.dispose();\n    });\n\n    this._disposables = [];\n  };\n\n  DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\n    this._worker(resource).then(function (worker) {\n      return worker.doValidation(resource.toString()).then(function (diagnostics) {\n        var markers = diagnostics.map(function (d) {\n          return toDiagnostics(resource, d);\n        });\n        monaco.editor.setModelMarkers(monaco.editor.getModel(resource), languageId, markers);\n      });\n    }).then(undefined, function (err) {\n      console.error(err);\n    });\n  };\n\n  return DiagnosticsAdapter;\n}();\n\nexport { DiagnosticsAdapter };\n\nfunction toSeverity(lsSeverity) {\n  switch (lsSeverity) {\n    case htmlService.DiagnosticSeverity.Error:\n      return monaco.MarkerSeverity.Error;\n\n    case htmlService.DiagnosticSeverity.Warning:\n      return monaco.MarkerSeverity.Warning;\n\n    case htmlService.DiagnosticSeverity.Information:\n      return monaco.MarkerSeverity.Info;\n\n    case htmlService.DiagnosticSeverity.Hint:\n      return monaco.MarkerSeverity.Hint;\n\n    default:\n      return monaco.MarkerSeverity.Info;\n  }\n}\n\nfunction toDiagnostics(resource, diag) {\n  var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\n  return {\n    severity: toSeverity(diag.severity),\n    startLineNumber: diag.range.start.line + 1,\n    startColumn: diag.range.start.character + 1,\n    endLineNumber: diag.range.end.line + 1,\n    endColumn: diag.range.end.character + 1,\n    message: diag.message,\n    code: code,\n    source: diag.source\n  };\n} // --- completion ------\n\n\nfunction fromPosition(position) {\n  if (!position) {\n    return void 0;\n  }\n\n  return {\n    character: position.column - 1,\n    line: position.lineNumber - 1\n  };\n}\n\nfunction fromRange(range) {\n  if (!range) {\n    return void 0;\n  }\n\n  return {\n    start: fromPosition(range.getStartPosition()),\n    end: fromPosition(range.getEndPosition())\n  };\n}\n\nfunction toRange(range) {\n  if (!range) {\n    return void 0;\n  }\n\n  return new Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\n}\n\nfunction toCompletionItemKind(kind) {\n  var mItemKind = monaco.languages.CompletionItemKind;\n\n  switch (kind) {\n    case htmlService.CompletionItemKind.Text:\n      return mItemKind.Text;\n\n    case htmlService.CompletionItemKind.Method:\n      return mItemKind.Method;\n\n    case htmlService.CompletionItemKind.Function:\n      return mItemKind.Function;\n\n    case htmlService.CompletionItemKind.Constructor:\n      return mItemKind.Constructor;\n\n    case htmlService.CompletionItemKind.Field:\n      return mItemKind.Field;\n\n    case htmlService.CompletionItemKind.Variable:\n      return mItemKind.Variable;\n\n    case htmlService.CompletionItemKind.Class:\n      return mItemKind.Class;\n\n    case htmlService.CompletionItemKind.Interface:\n      return mItemKind.Interface;\n\n    case htmlService.CompletionItemKind.Module:\n      return mItemKind.Module;\n\n    case htmlService.CompletionItemKind.Property:\n      return mItemKind.Property;\n\n    case htmlService.CompletionItemKind.Unit:\n      return mItemKind.Unit;\n\n    case htmlService.CompletionItemKind.Value:\n      return mItemKind.Value;\n\n    case htmlService.CompletionItemKind.Enum:\n      return mItemKind.Enum;\n\n    case htmlService.CompletionItemKind.Keyword:\n      return mItemKind.Keyword;\n\n    case htmlService.CompletionItemKind.Snippet:\n      return mItemKind.Snippet;\n\n    case htmlService.CompletionItemKind.Color:\n      return mItemKind.Color;\n\n    case htmlService.CompletionItemKind.File:\n      return mItemKind.File;\n\n    case htmlService.CompletionItemKind.Reference:\n      return mItemKind.Reference;\n  }\n\n  return mItemKind.Property;\n}\n\nfunction fromCompletionItemKind(kind) {\n  var mItemKind = monaco.languages.CompletionItemKind;\n\n  switch (kind) {\n    case mItemKind.Text:\n      return htmlService.CompletionItemKind.Text;\n\n    case mItemKind.Method:\n      return htmlService.CompletionItemKind.Method;\n\n    case mItemKind.Function:\n      return htmlService.CompletionItemKind.Function;\n\n    case mItemKind.Constructor:\n      return htmlService.CompletionItemKind.Constructor;\n\n    case mItemKind.Field:\n      return htmlService.CompletionItemKind.Field;\n\n    case mItemKind.Variable:\n      return htmlService.CompletionItemKind.Variable;\n\n    case mItemKind.Class:\n      return htmlService.CompletionItemKind.Class;\n\n    case mItemKind.Interface:\n      return htmlService.CompletionItemKind.Interface;\n\n    case mItemKind.Module:\n      return htmlService.CompletionItemKind.Module;\n\n    case mItemKind.Property:\n      return htmlService.CompletionItemKind.Property;\n\n    case mItemKind.Unit:\n      return htmlService.CompletionItemKind.Unit;\n\n    case mItemKind.Value:\n      return htmlService.CompletionItemKind.Value;\n\n    case mItemKind.Enum:\n      return htmlService.CompletionItemKind.Enum;\n\n    case mItemKind.Keyword:\n      return htmlService.CompletionItemKind.Keyword;\n\n    case mItemKind.Snippet:\n      return htmlService.CompletionItemKind.Snippet;\n\n    case mItemKind.Color:\n      return htmlService.CompletionItemKind.Color;\n\n    case mItemKind.File:\n      return htmlService.CompletionItemKind.File;\n\n    case mItemKind.Reference:\n      return htmlService.CompletionItemKind.Reference;\n  }\n\n  return htmlService.CompletionItemKind.Property;\n}\n\nfunction toTextEdit(textEdit) {\n  if (!textEdit) {\n    return void 0;\n  }\n\n  return {\n    range: toRange(textEdit.range),\n    text: textEdit.newText\n  };\n}\n\nvar CompletionAdapter =\n/** @class */\nfunction () {\n  function CompletionAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\n    get: function () {\n      return ['.', ':', '<', '\"', '=', '/'];\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.doComplete(resource.toString(), fromPosition(position));\n    }).then(function (info) {\n      if (!info) {\n        return;\n      }\n\n      var wordInfo = model.getWordUntilPosition(position);\n      var wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\n      var items = info.items.map(function (entry) {\n        var item = {\n          label: entry.label,\n          insertText: entry.insertText || entry.label,\n          sortText: entry.sortText,\n          filterText: entry.filterText,\n          documentation: entry.documentation,\n          detail: entry.detail,\n          range: wordRange,\n          kind: toCompletionItemKind(entry.kind)\n        };\n\n        if (entry.textEdit) {\n          item.range = toRange(entry.textEdit.range);\n          item.insertText = entry.textEdit.newText;\n        }\n\n        if (entry.additionalTextEdits) {\n          item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\n        }\n\n        if (entry.insertTextFormat === htmlService.InsertTextFormat.Snippet) {\n          item.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n\n        return item;\n      });\n      return {\n        isIncomplete: info.isIncomplete,\n        suggestions: items\n      };\n    });\n  };\n\n  return CompletionAdapter;\n}();\n\nexport { CompletionAdapter }; // --- hover ------\n\nfunction isMarkupContent(thing) {\n  return thing && typeof thing === 'object' && typeof thing.kind === 'string';\n}\n\nfunction toMarkdownString(entry) {\n  if (typeof entry === 'string') {\n    return {\n      value: entry\n    };\n  }\n\n  if (isMarkupContent(entry)) {\n    if (entry.kind === 'plaintext') {\n      return {\n        value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\n      };\n    }\n\n    return {\n      value: entry.value\n    };\n  }\n\n  return {\n    value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n'\n  };\n}\n\nfunction toMarkedStringArray(contents) {\n  if (!contents) {\n    return void 0;\n  }\n\n  if (Array.isArray(contents)) {\n    return contents.map(toMarkdownString);\n  }\n\n  return [toMarkdownString(contents)];\n}\n\nvar HoverAdapter =\n/** @class */\nfunction () {\n  function HoverAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  HoverAdapter.prototype.provideHover = function (model, position, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.doHover(resource.toString(), fromPosition(position));\n    }).then(function (info) {\n      if (!info) {\n        return;\n      }\n\n      return {\n        range: toRange(info.range),\n        contents: toMarkedStringArray(info.contents)\n      };\n    });\n  };\n\n  return HoverAdapter;\n}();\n\nexport { HoverAdapter }; // --- document highlights ------\n\nfunction toHighlighKind(kind) {\n  var mKind = monaco.languages.DocumentHighlightKind;\n\n  switch (kind) {\n    case htmlService.DocumentHighlightKind.Read:\n      return mKind.Read;\n\n    case htmlService.DocumentHighlightKind.Write:\n      return mKind.Write;\n\n    case htmlService.DocumentHighlightKind.Text:\n      return mKind.Text;\n  }\n\n  return mKind.Text;\n}\n\nvar DocumentHighlightAdapter =\n/** @class */\nfunction () {\n  function DocumentHighlightAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  DocumentHighlightAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.findDocumentHighlights(resource.toString(), fromPosition(position));\n    }).then(function (items) {\n      if (!items) {\n        return;\n      }\n\n      return items.map(function (item) {\n        return {\n          range: toRange(item.range),\n          kind: toHighlighKind(item.kind)\n        };\n      });\n    });\n  };\n\n  return DocumentHighlightAdapter;\n}();\n\nexport { DocumentHighlightAdapter }; // --- document symbols ------\n\nfunction toSymbolKind(kind) {\n  var mKind = monaco.languages.SymbolKind;\n\n  switch (kind) {\n    case htmlService.SymbolKind.File:\n      return mKind.Array;\n\n    case htmlService.SymbolKind.Module:\n      return mKind.Module;\n\n    case htmlService.SymbolKind.Namespace:\n      return mKind.Namespace;\n\n    case htmlService.SymbolKind.Package:\n      return mKind.Package;\n\n    case htmlService.SymbolKind.Class:\n      return mKind.Class;\n\n    case htmlService.SymbolKind.Method:\n      return mKind.Method;\n\n    case htmlService.SymbolKind.Property:\n      return mKind.Property;\n\n    case htmlService.SymbolKind.Field:\n      return mKind.Field;\n\n    case htmlService.SymbolKind.Constructor:\n      return mKind.Constructor;\n\n    case htmlService.SymbolKind.Enum:\n      return mKind.Enum;\n\n    case htmlService.SymbolKind.Interface:\n      return mKind.Interface;\n\n    case htmlService.SymbolKind.Function:\n      return mKind.Function;\n\n    case htmlService.SymbolKind.Variable:\n      return mKind.Variable;\n\n    case htmlService.SymbolKind.Constant:\n      return mKind.Constant;\n\n    case htmlService.SymbolKind.String:\n      return mKind.String;\n\n    case htmlService.SymbolKind.Number:\n      return mKind.Number;\n\n    case htmlService.SymbolKind.Boolean:\n      return mKind.Boolean;\n\n    case htmlService.SymbolKind.Array:\n      return mKind.Array;\n  }\n\n  return mKind.Function;\n}\n\nvar DocumentSymbolAdapter =\n/** @class */\nfunction () {\n  function DocumentSymbolAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.findDocumentSymbols(resource.toString());\n    }).then(function (items) {\n      if (!items) {\n        return;\n      }\n\n      return items.map(function (item) {\n        return {\n          name: item.name,\n          detail: '',\n          containerName: item.containerName,\n          kind: toSymbolKind(item.kind),\n          tags: [],\n          range: toRange(item.location.range),\n          selectionRange: toRange(item.location.range)\n        };\n      });\n    });\n  };\n\n  return DocumentSymbolAdapter;\n}();\n\nexport { DocumentSymbolAdapter };\n\nvar DocumentLinkAdapter =\n/** @class */\nfunction () {\n  function DocumentLinkAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  DocumentLinkAdapter.prototype.provideLinks = function (model, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.findDocumentLinks(resource.toString());\n    }).then(function (items) {\n      if (!items) {\n        return;\n      }\n\n      return {\n        links: items.map(function (item) {\n          return {\n            range: toRange(item.range),\n            url: item.target\n          };\n        })\n      };\n    });\n  };\n\n  return DocumentLinkAdapter;\n}();\n\nexport { DocumentLinkAdapter };\n\nfunction fromFormattingOptions(options) {\n  return {\n    tabSize: options.tabSize,\n    insertSpaces: options.insertSpaces\n  };\n}\n\nvar DocumentFormattingEditProvider =\n/** @class */\nfunction () {\n  function DocumentFormattingEditProvider(_worker) {\n    this._worker = _worker;\n  }\n\n  DocumentFormattingEditProvider.prototype.provideDocumentFormattingEdits = function (model, options, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.format(resource.toString(), null, fromFormattingOptions(options)).then(function (edits) {\n        if (!edits || edits.length === 0) {\n          return;\n        }\n\n        return edits.map(toTextEdit);\n      });\n    });\n  };\n\n  return DocumentFormattingEditProvider;\n}();\n\nexport { DocumentFormattingEditProvider };\n\nvar DocumentRangeFormattingEditProvider =\n/** @class */\nfunction () {\n  function DocumentRangeFormattingEditProvider(_worker) {\n    this._worker = _worker;\n  }\n\n  DocumentRangeFormattingEditProvider.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.format(resource.toString(), fromRange(range), fromFormattingOptions(options)).then(function (edits) {\n        if (!edits || edits.length === 0) {\n          return;\n        }\n\n        return edits.map(toTextEdit);\n      });\n    });\n  };\n\n  return DocumentRangeFormattingEditProvider;\n}();\n\nexport { DocumentRangeFormattingEditProvider };\n\nvar RenameAdapter =\n/** @class */\nfunction () {\n  function RenameAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.doRename(resource.toString(), fromPosition(position), newName);\n    }).then(function (edit) {\n      return toWorkspaceEdit(edit);\n    });\n  };\n\n  return RenameAdapter;\n}();\n\nexport { RenameAdapter };\n\nfunction toWorkspaceEdit(edit) {\n  if (!edit || !edit.changes) {\n    return void 0;\n  }\n\n  var resourceEdits = [];\n\n  for (var uri in edit.changes) {\n    var _uri = Uri.parse(uri);\n\n    for (var _i = 0, _a = edit.changes[uri]; _i < _a.length; _i++) {\n      var e = _a[_i];\n      resourceEdits.push({\n        resource: _uri,\n        edit: {\n          range: toRange(e.range),\n          text: e.newText\n        }\n      });\n    }\n  }\n\n  return {\n    edits: resourceEdits\n  };\n}\n\nvar FoldingRangeAdapter =\n/** @class */\nfunction () {\n  function FoldingRangeAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  FoldingRangeAdapter.prototype.provideFoldingRanges = function (model, context, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.getFoldingRanges(resource.toString(), context);\n    }).then(function (ranges) {\n      if (!ranges) {\n        return;\n      }\n\n      return ranges.map(function (range) {\n        var result = {\n          start: range.startLine + 1,\n          end: range.endLine + 1\n        };\n\n        if (typeof range.kind !== 'undefined') {\n          result.kind = toFoldingRangeKind(range.kind);\n        }\n\n        return result;\n      });\n    });\n  };\n\n  return FoldingRangeAdapter;\n}();\n\nexport { FoldingRangeAdapter };\n\nfunction toFoldingRangeKind(kind) {\n  switch (kind) {\n    case htmlService.FoldingRangeKind.Comment:\n      return monaco.languages.FoldingRangeKind.Comment;\n\n    case htmlService.FoldingRangeKind.Imports:\n      return monaco.languages.FoldingRangeKind.Imports;\n\n    case htmlService.FoldingRangeKind.Region:\n      return monaco.languages.FoldingRangeKind.Region;\n  }\n}\n\nvar SelectionRangeAdapter =\n/** @class */\nfunction () {\n  function SelectionRangeAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  SelectionRangeAdapter.prototype.provideSelectionRanges = function (model, positions, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.getSelectionRanges(resource.toString(), positions.map(fromPosition));\n    }).then(function (selectionRanges) {\n      if (!selectionRanges) {\n        return;\n      }\n\n      return selectionRanges.map(function (selectionRange) {\n        var result = [];\n\n        while (selectionRange) {\n          result.push({\n            range: toRange(selectionRange.range)\n          });\n          selectionRange = selectionRange.parent;\n        }\n\n        return result;\n      });\n    });\n  };\n\n  return SelectionRangeAdapter;\n}();\n\nexport { SelectionRangeAdapter };","map":{"version":3,"sources":["/home/chaithra/Documents/customised/customised/node_modules/monaco-editor/esm/vs/language/html/languageFeatures.js"],"names":["htmlService","Uri","monaco","Range","DiagnosticsAdapter","_languageId","_worker","defaults","_this","_disposables","_listener","Object","create","onModelAdd","model","modeId","getModeId","handle","uri","toString","onDidChangeContent","clearTimeout","setTimeout","_doValidate","onModelRemoved","editor","setModelMarkers","uriStr","listener","dispose","push","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","onDidChange","_","getModels","forEach","key","prototype","d","resource","languageId","then","worker","doValidation","diagnostics","markers","map","toDiagnostics","getModel","undefined","err","console","error","toSeverity","lsSeverity","DiagnosticSeverity","Error","MarkerSeverity","Warning","Information","Info","Hint","diag","code","String","severity","startLineNumber","range","start","line","startColumn","character","endLineNumber","end","endColumn","message","source","fromPosition","position","column","lineNumber","fromRange","getStartPosition","getEndPosition","toRange","toCompletionItemKind","kind","mItemKind","languages","CompletionItemKind","Text","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","Color","File","Reference","fromCompletionItemKind","toTextEdit","textEdit","text","newText","CompletionAdapter","defineProperty","get","enumerable","configurable","provideCompletionItems","context","token","doComplete","info","wordInfo","getWordUntilPosition","wordRange","items","entry","item","label","insertText","sortText","filterText","documentation","detail","additionalTextEdits","insertTextFormat","InsertTextFormat","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","isIncomplete","suggestions","isMarkupContent","thing","toMarkdownString","value","replace","language","toMarkedStringArray","contents","Array","isArray","HoverAdapter","provideHover","doHover","toHighlighKind","mKind","DocumentHighlightKind","Read","Write","DocumentHighlightAdapter","provideDocumentHighlights","findDocumentHighlights","toSymbolKind","SymbolKind","Namespace","Package","Constant","Number","Boolean","DocumentSymbolAdapter","provideDocumentSymbols","findDocumentSymbols","name","containerName","tags","location","selectionRange","DocumentLinkAdapter","provideLinks","findDocumentLinks","links","url","target","fromFormattingOptions","options","tabSize","insertSpaces","DocumentFormattingEditProvider","provideDocumentFormattingEdits","format","edits","length","DocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","RenameAdapter","provideRenameEdits","newName","doRename","edit","toWorkspaceEdit","changes","resourceEdits","_uri","parse","_i","_a","e","FoldingRangeAdapter","provideFoldingRanges","getFoldingRanges","ranges","result","startLine","endLine","toFoldingRangeKind","FoldingRangeKind","Comment","Imports","Region","SelectionRangeAdapter","provideSelectionRanges","positions","getSelectionRanges","selectionRanges","parent"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport * as htmlService from './_deps/vscode-html-languageservice/htmlLanguageService.js';\r\nvar Uri = monaco.Uri;\r\nvar Range = monaco.Range;\r\n// --- diagnostics --- ---\r\nvar DiagnosticsAdapter = /** @class */ (function () {\r\n    function DiagnosticsAdapter(_languageId, _worker, defaults) {\r\n        var _this = this;\r\n        this._languageId = _languageId;\r\n        this._worker = _worker;\r\n        this._disposables = [];\r\n        this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            var modeId = model.getModeId();\r\n            if (modeId !== _this._languageId) {\r\n                return;\r\n            }\r\n            var handle;\r\n            _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model.uri, modeId); }, 500);\r\n            });\r\n            _this._doValidate(model.uri, modeId);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            monaco.editor.setModelMarkers(model, _this._languageId, []);\r\n            var uriStr = model.uri.toString();\r\n            var listener = _this._listener[uriStr];\r\n            if (listener) {\r\n                listener.dispose();\r\n                delete _this._listener[uriStr];\r\n            }\r\n        };\r\n        this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\r\n        this._disposables.push(monaco.editor.onWillDisposeModel(function (model) {\r\n            onModelRemoved(model);\r\n        }));\r\n        this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        this._disposables.push(defaults.onDidChange(function (_) {\r\n            monaco.editor.getModels().forEach(function (model) {\r\n                if (model.getModeId() === _this._languageId) {\r\n                    onModelRemoved(model);\r\n                    onModelAdd(model);\r\n                }\r\n            });\r\n        }));\r\n        this._disposables.push({\r\n            dispose: function () {\r\n                for (var key in _this._listener) {\r\n                    _this._listener[key].dispose();\r\n                }\r\n            }\r\n        });\r\n        monaco.editor.getModels().forEach(onModelAdd);\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\r\n        this._worker(resource).then(function (worker) {\r\n            return worker.doValidation(resource.toString()).then(function (diagnostics) {\r\n                var markers = diagnostics.map(function (d) { return toDiagnostics(resource, d); });\r\n                monaco.editor.setModelMarkers(monaco.editor.getModel(resource), languageId, markers);\r\n            });\r\n        }).then(undefined, function (err) {\r\n            console.error(err);\r\n        });\r\n    };\r\n    return DiagnosticsAdapter;\r\n}());\r\nexport { DiagnosticsAdapter };\r\nfunction toSeverity(lsSeverity) {\r\n    switch (lsSeverity) {\r\n        case htmlService.DiagnosticSeverity.Error: return monaco.MarkerSeverity.Error;\r\n        case htmlService.DiagnosticSeverity.Warning: return monaco.MarkerSeverity.Warning;\r\n        case htmlService.DiagnosticSeverity.Information: return monaco.MarkerSeverity.Info;\r\n        case htmlService.DiagnosticSeverity.Hint: return monaco.MarkerSeverity.Hint;\r\n        default:\r\n            return monaco.MarkerSeverity.Info;\r\n    }\r\n}\r\nfunction toDiagnostics(resource, diag) {\r\n    var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\r\n    return {\r\n        severity: toSeverity(diag.severity),\r\n        startLineNumber: diag.range.start.line + 1,\r\n        startColumn: diag.range.start.character + 1,\r\n        endLineNumber: diag.range.end.line + 1,\r\n        endColumn: diag.range.end.character + 1,\r\n        message: diag.message,\r\n        code: code,\r\n        source: diag.source\r\n    };\r\n}\r\n// --- completion ------\r\nfunction fromPosition(position) {\r\n    if (!position) {\r\n        return void 0;\r\n    }\r\n    return { character: position.column - 1, line: position.lineNumber - 1 };\r\n}\r\nfunction fromRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return { start: fromPosition(range.getStartPosition()), end: fromPosition(range.getEndPosition()) };\r\n}\r\nfunction toRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return new Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\r\n}\r\nfunction toCompletionItemKind(kind) {\r\n    var mItemKind = monaco.languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case htmlService.CompletionItemKind.Text: return mItemKind.Text;\r\n        case htmlService.CompletionItemKind.Method: return mItemKind.Method;\r\n        case htmlService.CompletionItemKind.Function: return mItemKind.Function;\r\n        case htmlService.CompletionItemKind.Constructor: return mItemKind.Constructor;\r\n        case htmlService.CompletionItemKind.Field: return mItemKind.Field;\r\n        case htmlService.CompletionItemKind.Variable: return mItemKind.Variable;\r\n        case htmlService.CompletionItemKind.Class: return mItemKind.Class;\r\n        case htmlService.CompletionItemKind.Interface: return mItemKind.Interface;\r\n        case htmlService.CompletionItemKind.Module: return mItemKind.Module;\r\n        case htmlService.CompletionItemKind.Property: return mItemKind.Property;\r\n        case htmlService.CompletionItemKind.Unit: return mItemKind.Unit;\r\n        case htmlService.CompletionItemKind.Value: return mItemKind.Value;\r\n        case htmlService.CompletionItemKind.Enum: return mItemKind.Enum;\r\n        case htmlService.CompletionItemKind.Keyword: return mItemKind.Keyword;\r\n        case htmlService.CompletionItemKind.Snippet: return mItemKind.Snippet;\r\n        case htmlService.CompletionItemKind.Color: return mItemKind.Color;\r\n        case htmlService.CompletionItemKind.File: return mItemKind.File;\r\n        case htmlService.CompletionItemKind.Reference: return mItemKind.Reference;\r\n    }\r\n    return mItemKind.Property;\r\n}\r\nfunction fromCompletionItemKind(kind) {\r\n    var mItemKind = monaco.languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case mItemKind.Text: return htmlService.CompletionItemKind.Text;\r\n        case mItemKind.Method: return htmlService.CompletionItemKind.Method;\r\n        case mItemKind.Function: return htmlService.CompletionItemKind.Function;\r\n        case mItemKind.Constructor: return htmlService.CompletionItemKind.Constructor;\r\n        case mItemKind.Field: return htmlService.CompletionItemKind.Field;\r\n        case mItemKind.Variable: return htmlService.CompletionItemKind.Variable;\r\n        case mItemKind.Class: return htmlService.CompletionItemKind.Class;\r\n        case mItemKind.Interface: return htmlService.CompletionItemKind.Interface;\r\n        case mItemKind.Module: return htmlService.CompletionItemKind.Module;\r\n        case mItemKind.Property: return htmlService.CompletionItemKind.Property;\r\n        case mItemKind.Unit: return htmlService.CompletionItemKind.Unit;\r\n        case mItemKind.Value: return htmlService.CompletionItemKind.Value;\r\n        case mItemKind.Enum: return htmlService.CompletionItemKind.Enum;\r\n        case mItemKind.Keyword: return htmlService.CompletionItemKind.Keyword;\r\n        case mItemKind.Snippet: return htmlService.CompletionItemKind.Snippet;\r\n        case mItemKind.Color: return htmlService.CompletionItemKind.Color;\r\n        case mItemKind.File: return htmlService.CompletionItemKind.File;\r\n        case mItemKind.Reference: return htmlService.CompletionItemKind.Reference;\r\n    }\r\n    return htmlService.CompletionItemKind.Property;\r\n}\r\nfunction toTextEdit(textEdit) {\r\n    if (!textEdit) {\r\n        return void 0;\r\n    }\r\n    return {\r\n        range: toRange(textEdit.range),\r\n        text: textEdit.newText\r\n    };\r\n}\r\nvar CompletionAdapter = /** @class */ (function () {\r\n    function CompletionAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return ['.', ':', '<', '\"', '=', '/'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.doComplete(resource.toString(), fromPosition(position));\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var wordInfo = model.getWordUntilPosition(position);\r\n            var wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n            var items = info.items.map(function (entry) {\r\n                var item = {\r\n                    label: entry.label,\r\n                    insertText: entry.insertText || entry.label,\r\n                    sortText: entry.sortText,\r\n                    filterText: entry.filterText,\r\n                    documentation: entry.documentation,\r\n                    detail: entry.detail,\r\n                    range: wordRange,\r\n                    kind: toCompletionItemKind(entry.kind),\r\n                };\r\n                if (entry.textEdit) {\r\n                    item.range = toRange(entry.textEdit.range);\r\n                    item.insertText = entry.textEdit.newText;\r\n                }\r\n                if (entry.additionalTextEdits) {\r\n                    item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\r\n                }\r\n                if (entry.insertTextFormat === htmlService.InsertTextFormat.Snippet) {\r\n                    item.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\r\n                }\r\n                return item;\r\n            });\r\n            return {\r\n                isIncomplete: info.isIncomplete,\r\n                suggestions: items\r\n            };\r\n        });\r\n    };\r\n    return CompletionAdapter;\r\n}());\r\nexport { CompletionAdapter };\r\n// --- hover ------\r\nfunction isMarkupContent(thing) {\r\n    return thing && typeof thing === 'object' && typeof thing.kind === 'string';\r\n}\r\nfunction toMarkdownString(entry) {\r\n    if (typeof entry === 'string') {\r\n        return {\r\n            value: entry\r\n        };\r\n    }\r\n    if (isMarkupContent(entry)) {\r\n        if (entry.kind === 'plaintext') {\r\n            return {\r\n                value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\r\n            };\r\n        }\r\n        return {\r\n            value: entry.value\r\n        };\r\n    }\r\n    return { value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n' };\r\n}\r\nfunction toMarkedStringArray(contents) {\r\n    if (!contents) {\r\n        return void 0;\r\n    }\r\n    if (Array.isArray(contents)) {\r\n        return contents.map(toMarkdownString);\r\n    }\r\n    return [toMarkdownString(contents)];\r\n}\r\nvar HoverAdapter = /** @class */ (function () {\r\n    function HoverAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    HoverAdapter.prototype.provideHover = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.doHover(resource.toString(), fromPosition(position));\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            return {\r\n                range: toRange(info.range),\r\n                contents: toMarkedStringArray(info.contents)\r\n            };\r\n        });\r\n    };\r\n    return HoverAdapter;\r\n}());\r\nexport { HoverAdapter };\r\n// --- document highlights ------\r\nfunction toHighlighKind(kind) {\r\n    var mKind = monaco.languages.DocumentHighlightKind;\r\n    switch (kind) {\r\n        case htmlService.DocumentHighlightKind.Read: return mKind.Read;\r\n        case htmlService.DocumentHighlightKind.Write: return mKind.Write;\r\n        case htmlService.DocumentHighlightKind.Text: return mKind.Text;\r\n    }\r\n    return mKind.Text;\r\n}\r\nvar DocumentHighlightAdapter = /** @class */ (function () {\r\n    function DocumentHighlightAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentHighlightAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.findDocumentHighlights(resource.toString(), fromPosition(position)); }).then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return items.map(function (item) { return ({\r\n                range: toRange(item.range),\r\n                kind: toHighlighKind(item.kind)\r\n            }); });\r\n        });\r\n    };\r\n    return DocumentHighlightAdapter;\r\n}());\r\nexport { DocumentHighlightAdapter };\r\n// --- document symbols ------\r\nfunction toSymbolKind(kind) {\r\n    var mKind = monaco.languages.SymbolKind;\r\n    switch (kind) {\r\n        case htmlService.SymbolKind.File: return mKind.Array;\r\n        case htmlService.SymbolKind.Module: return mKind.Module;\r\n        case htmlService.SymbolKind.Namespace: return mKind.Namespace;\r\n        case htmlService.SymbolKind.Package: return mKind.Package;\r\n        case htmlService.SymbolKind.Class: return mKind.Class;\r\n        case htmlService.SymbolKind.Method: return mKind.Method;\r\n        case htmlService.SymbolKind.Property: return mKind.Property;\r\n        case htmlService.SymbolKind.Field: return mKind.Field;\r\n        case htmlService.SymbolKind.Constructor: return mKind.Constructor;\r\n        case htmlService.SymbolKind.Enum: return mKind.Enum;\r\n        case htmlService.SymbolKind.Interface: return mKind.Interface;\r\n        case htmlService.SymbolKind.Function: return mKind.Function;\r\n        case htmlService.SymbolKind.Variable: return mKind.Variable;\r\n        case htmlService.SymbolKind.Constant: return mKind.Constant;\r\n        case htmlService.SymbolKind.String: return mKind.String;\r\n        case htmlService.SymbolKind.Number: return mKind.Number;\r\n        case htmlService.SymbolKind.Boolean: return mKind.Boolean;\r\n        case htmlService.SymbolKind.Array: return mKind.Array;\r\n    }\r\n    return mKind.Function;\r\n}\r\nvar DocumentSymbolAdapter = /** @class */ (function () {\r\n    function DocumentSymbolAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.findDocumentSymbols(resource.toString()); }).then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return items.map(function (item) { return ({\r\n                name: item.name,\r\n                detail: '',\r\n                containerName: item.containerName,\r\n                kind: toSymbolKind(item.kind),\r\n                tags: [],\r\n                range: toRange(item.location.range),\r\n                selectionRange: toRange(item.location.range)\r\n            }); });\r\n        });\r\n    };\r\n    return DocumentSymbolAdapter;\r\n}());\r\nexport { DocumentSymbolAdapter };\r\nvar DocumentLinkAdapter = /** @class */ (function () {\r\n    function DocumentLinkAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentLinkAdapter.prototype.provideLinks = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.findDocumentLinks(resource.toString()); }).then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return {\r\n                links: items.map(function (item) { return ({\r\n                    range: toRange(item.range),\r\n                    url: item.target\r\n                }); })\r\n            };\r\n        });\r\n    };\r\n    return DocumentLinkAdapter;\r\n}());\r\nexport { DocumentLinkAdapter };\r\nfunction fromFormattingOptions(options) {\r\n    return {\r\n        tabSize: options.tabSize,\r\n        insertSpaces: options.insertSpaces\r\n    };\r\n}\r\nvar DocumentFormattingEditProvider = /** @class */ (function () {\r\n    function DocumentFormattingEditProvider(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentFormattingEditProvider.prototype.provideDocumentFormattingEdits = function (model, options, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.format(resource.toString(), null, fromFormattingOptions(options)).then(function (edits) {\r\n                if (!edits || edits.length === 0) {\r\n                    return;\r\n                }\r\n                return edits.map(toTextEdit);\r\n            });\r\n        });\r\n    };\r\n    return DocumentFormattingEditProvider;\r\n}());\r\nexport { DocumentFormattingEditProvider };\r\nvar DocumentRangeFormattingEditProvider = /** @class */ (function () {\r\n    function DocumentRangeFormattingEditProvider(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentRangeFormattingEditProvider.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.format(resource.toString(), fromRange(range), fromFormattingOptions(options)).then(function (edits) {\r\n                if (!edits || edits.length === 0) {\r\n                    return;\r\n                }\r\n                return edits.map(toTextEdit);\r\n            });\r\n        });\r\n    };\r\n    return DocumentRangeFormattingEditProvider;\r\n}());\r\nexport { DocumentRangeFormattingEditProvider };\r\nvar RenameAdapter = /** @class */ (function () {\r\n    function RenameAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.doRename(resource.toString(), fromPosition(position), newName);\r\n        }).then(function (edit) {\r\n            return toWorkspaceEdit(edit);\r\n        });\r\n    };\r\n    return RenameAdapter;\r\n}());\r\nexport { RenameAdapter };\r\nfunction toWorkspaceEdit(edit) {\r\n    if (!edit || !edit.changes) {\r\n        return void 0;\r\n    }\r\n    var resourceEdits = [];\r\n    for (var uri in edit.changes) {\r\n        var _uri = Uri.parse(uri);\r\n        for (var _i = 0, _a = edit.changes[uri]; _i < _a.length; _i++) {\r\n            var e = _a[_i];\r\n            resourceEdits.push({\r\n                resource: _uri,\r\n                edit: {\r\n                    range: toRange(e.range),\r\n                    text: e.newText\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return {\r\n        edits: resourceEdits\r\n    };\r\n}\r\nvar FoldingRangeAdapter = /** @class */ (function () {\r\n    function FoldingRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    FoldingRangeAdapter.prototype.provideFoldingRanges = function (model, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getFoldingRanges(resource.toString(), context); }).then(function (ranges) {\r\n            if (!ranges) {\r\n                return;\r\n            }\r\n            return ranges.map(function (range) {\r\n                var result = {\r\n                    start: range.startLine + 1,\r\n                    end: range.endLine + 1\r\n                };\r\n                if (typeof range.kind !== 'undefined') {\r\n                    result.kind = toFoldingRangeKind(range.kind);\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return FoldingRangeAdapter;\r\n}());\r\nexport { FoldingRangeAdapter };\r\nfunction toFoldingRangeKind(kind) {\r\n    switch (kind) {\r\n        case htmlService.FoldingRangeKind.Comment: return monaco.languages.FoldingRangeKind.Comment;\r\n        case htmlService.FoldingRangeKind.Imports: return monaco.languages.FoldingRangeKind.Imports;\r\n        case htmlService.FoldingRangeKind.Region: return monaco.languages.FoldingRangeKind.Region;\r\n    }\r\n}\r\nvar SelectionRangeAdapter = /** @class */ (function () {\r\n    function SelectionRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    SelectionRangeAdapter.prototype.provideSelectionRanges = function (model, positions, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getSelectionRanges(resource.toString(), positions.map(fromPosition)); }).then(function (selectionRanges) {\r\n            if (!selectionRanges) {\r\n                return;\r\n            }\r\n            return selectionRanges.map(function (selectionRange) {\r\n                var result = [];\r\n                while (selectionRange) {\r\n                    result.push({ range: toRange(selectionRange.range) });\r\n                    selectionRange = selectionRange.parent;\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return SelectionRangeAdapter;\r\n}());\r\nexport { SelectionRangeAdapter };\r\n"]},"metadata":{},"sourceType":"module"}