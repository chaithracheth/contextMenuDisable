{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as cssService from './_deps/vscode-css-languageservice/cssLanguageService.js';\nvar Uri = monaco.Uri;\nvar Range = monaco.Range; // --- diagnostics --- ---\n\nvar DiagnosticsAdapter =\n/** @class */\nfunction () {\n  function DiagnosticsAdapter(_languageId, _worker, defaults) {\n    var _this = this;\n\n    this._languageId = _languageId;\n    this._worker = _worker;\n    this._disposables = [];\n    this._listener = Object.create(null);\n\n    var onModelAdd = function (model) {\n      var modeId = model.getModeId();\n\n      if (modeId !== _this._languageId) {\n        return;\n      }\n\n      var handle;\n      _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\n        window.clearTimeout(handle);\n        handle = window.setTimeout(function () {\n          return _this._doValidate(model.uri, modeId);\n        }, 500);\n      });\n\n      _this._doValidate(model.uri, modeId);\n    };\n\n    var onModelRemoved = function (model) {\n      monaco.editor.setModelMarkers(model, _this._languageId, []);\n      var uriStr = model.uri.toString();\n      var listener = _this._listener[uriStr];\n\n      if (listener) {\n        listener.dispose();\n        delete _this._listener[uriStr];\n      }\n    };\n\n    this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\n\n    this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\n\n    this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\n      onModelRemoved(event.model);\n      onModelAdd(event.model);\n    }));\n\n    defaults.onDidChange(function (_) {\n      monaco.editor.getModels().forEach(function (model) {\n        if (model.getModeId() === _this._languageId) {\n          onModelRemoved(model);\n          onModelAdd(model);\n        }\n      });\n    });\n\n    this._disposables.push({\n      dispose: function () {\n        for (var key in _this._listener) {\n          _this._listener[key].dispose();\n        }\n      }\n    });\n\n    monaco.editor.getModels().forEach(onModelAdd);\n  }\n\n  DiagnosticsAdapter.prototype.dispose = function () {\n    this._disposables.forEach(function (d) {\n      return d && d.dispose();\n    });\n\n    this._disposables = [];\n  };\n\n  DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\n    this._worker(resource).then(function (worker) {\n      return worker.doValidation(resource.toString());\n    }).then(function (diagnostics) {\n      var markers = diagnostics.map(function (d) {\n        return toDiagnostics(resource, d);\n      });\n      var model = monaco.editor.getModel(resource);\n\n      if (model.getModeId() === languageId) {\n        monaco.editor.setModelMarkers(model, languageId, markers);\n      }\n    }).then(undefined, function (err) {\n      console.error(err);\n    });\n  };\n\n  return DiagnosticsAdapter;\n}();\n\nexport { DiagnosticsAdapter };\n\nfunction toSeverity(lsSeverity) {\n  switch (lsSeverity) {\n    case cssService.DiagnosticSeverity.Error:\n      return monaco.MarkerSeverity.Error;\n\n    case cssService.DiagnosticSeverity.Warning:\n      return monaco.MarkerSeverity.Warning;\n\n    case cssService.DiagnosticSeverity.Information:\n      return monaco.MarkerSeverity.Info;\n\n    case cssService.DiagnosticSeverity.Hint:\n      return monaco.MarkerSeverity.Hint;\n\n    default:\n      return monaco.MarkerSeverity.Info;\n  }\n}\n\nfunction toDiagnostics(resource, diag) {\n  var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\n  return {\n    severity: toSeverity(diag.severity),\n    startLineNumber: diag.range.start.line + 1,\n    startColumn: diag.range.start.character + 1,\n    endLineNumber: diag.range.end.line + 1,\n    endColumn: diag.range.end.character + 1,\n    message: diag.message,\n    code: code,\n    source: diag.source\n  };\n} // --- completion ------\n\n\nfunction fromPosition(position) {\n  if (!position) {\n    return void 0;\n  }\n\n  return {\n    character: position.column - 1,\n    line: position.lineNumber - 1\n  };\n}\n\nfunction fromRange(range) {\n  if (!range) {\n    return void 0;\n  }\n\n  return {\n    start: {\n      line: range.startLineNumber - 1,\n      character: range.startColumn - 1\n    },\n    end: {\n      line: range.endLineNumber - 1,\n      character: range.endColumn - 1\n    }\n  };\n}\n\nfunction toRange(range) {\n  if (!range) {\n    return void 0;\n  }\n\n  return new monaco.Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\n}\n\nfunction toCompletionItemKind(kind) {\n  var mItemKind = monaco.languages.CompletionItemKind;\n\n  switch (kind) {\n    case cssService.CompletionItemKind.Text:\n      return mItemKind.Text;\n\n    case cssService.CompletionItemKind.Method:\n      return mItemKind.Method;\n\n    case cssService.CompletionItemKind.Function:\n      return mItemKind.Function;\n\n    case cssService.CompletionItemKind.Constructor:\n      return mItemKind.Constructor;\n\n    case cssService.CompletionItemKind.Field:\n      return mItemKind.Field;\n\n    case cssService.CompletionItemKind.Variable:\n      return mItemKind.Variable;\n\n    case cssService.CompletionItemKind.Class:\n      return mItemKind.Class;\n\n    case cssService.CompletionItemKind.Interface:\n      return mItemKind.Interface;\n\n    case cssService.CompletionItemKind.Module:\n      return mItemKind.Module;\n\n    case cssService.CompletionItemKind.Property:\n      return mItemKind.Property;\n\n    case cssService.CompletionItemKind.Unit:\n      return mItemKind.Unit;\n\n    case cssService.CompletionItemKind.Value:\n      return mItemKind.Value;\n\n    case cssService.CompletionItemKind.Enum:\n      return mItemKind.Enum;\n\n    case cssService.CompletionItemKind.Keyword:\n      return mItemKind.Keyword;\n\n    case cssService.CompletionItemKind.Snippet:\n      return mItemKind.Snippet;\n\n    case cssService.CompletionItemKind.Color:\n      return mItemKind.Color;\n\n    case cssService.CompletionItemKind.File:\n      return mItemKind.File;\n\n    case cssService.CompletionItemKind.Reference:\n      return mItemKind.Reference;\n  }\n\n  return mItemKind.Property;\n}\n\nfunction toTextEdit(textEdit) {\n  if (!textEdit) {\n    return void 0;\n  }\n\n  return {\n    range: toRange(textEdit.range),\n    text: textEdit.newText\n  };\n}\n\nvar CompletionAdapter =\n/** @class */\nfunction () {\n  function CompletionAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\n    get: function () {\n      return [' ', ':'];\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.doComplete(resource.toString(), fromPosition(position));\n    }).then(function (info) {\n      if (!info) {\n        return;\n      }\n\n      var wordInfo = model.getWordUntilPosition(position);\n      var wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\n      var items = info.items.map(function (entry) {\n        var item = {\n          label: entry.label,\n          insertText: entry.insertText || entry.label,\n          sortText: entry.sortText,\n          filterText: entry.filterText,\n          documentation: entry.documentation,\n          detail: entry.detail,\n          range: wordRange,\n          kind: toCompletionItemKind(entry.kind)\n        };\n\n        if (entry.textEdit) {\n          item.range = toRange(entry.textEdit.range);\n          item.insertText = entry.textEdit.newText;\n        }\n\n        if (entry.additionalTextEdits) {\n          item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\n        }\n\n        if (entry.insertTextFormat === cssService.InsertTextFormat.Snippet) {\n          item.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n\n        return item;\n      });\n      return {\n        isIncomplete: info.isIncomplete,\n        suggestions: items\n      };\n    });\n  };\n\n  return CompletionAdapter;\n}();\n\nexport { CompletionAdapter };\n\nfunction isMarkupContent(thing) {\n  return thing && typeof thing === 'object' && typeof thing.kind === 'string';\n}\n\nfunction toMarkdownString(entry) {\n  if (typeof entry === 'string') {\n    return {\n      value: entry\n    };\n  }\n\n  if (isMarkupContent(entry)) {\n    if (entry.kind === 'plaintext') {\n      return {\n        value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\n      };\n    }\n\n    return {\n      value: entry.value\n    };\n  }\n\n  return {\n    value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n'\n  };\n}\n\nfunction toMarkedStringArray(contents) {\n  if (!contents) {\n    return void 0;\n  }\n\n  if (Array.isArray(contents)) {\n    return contents.map(toMarkdownString);\n  }\n\n  return [toMarkdownString(contents)];\n} // --- hover ------\n\n\nvar HoverAdapter =\n/** @class */\nfunction () {\n  function HoverAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  HoverAdapter.prototype.provideHover = function (model, position, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.doHover(resource.toString(), fromPosition(position));\n    }).then(function (info) {\n      if (!info) {\n        return;\n      }\n\n      return {\n        range: toRange(info.range),\n        contents: toMarkedStringArray(info.contents)\n      };\n    });\n  };\n\n  return HoverAdapter;\n}();\n\nexport { HoverAdapter }; // --- document highlights ------\n\nfunction toDocumentHighlightKind(kind) {\n  switch (kind) {\n    case cssService.DocumentHighlightKind.Read:\n      return monaco.languages.DocumentHighlightKind.Read;\n\n    case cssService.DocumentHighlightKind.Write:\n      return monaco.languages.DocumentHighlightKind.Write;\n\n    case cssService.DocumentHighlightKind.Text:\n      return monaco.languages.DocumentHighlightKind.Text;\n  }\n\n  return monaco.languages.DocumentHighlightKind.Text;\n}\n\nvar DocumentHighlightAdapter =\n/** @class */\nfunction () {\n  function DocumentHighlightAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  DocumentHighlightAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.findDocumentHighlights(resource.toString(), fromPosition(position));\n    }).then(function (entries) {\n      if (!entries) {\n        return;\n      }\n\n      return entries.map(function (entry) {\n        return {\n          range: toRange(entry.range),\n          kind: toDocumentHighlightKind(entry.kind)\n        };\n      });\n    });\n  };\n\n  return DocumentHighlightAdapter;\n}();\n\nexport { DocumentHighlightAdapter }; // --- definition ------\n\nfunction toLocation(location) {\n  return {\n    uri: Uri.parse(location.uri),\n    range: toRange(location.range)\n  };\n}\n\nvar DefinitionAdapter =\n/** @class */\nfunction () {\n  function DefinitionAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.findDefinition(resource.toString(), fromPosition(position));\n    }).then(function (definition) {\n      if (!definition) {\n        return;\n      }\n\n      return [toLocation(definition)];\n    });\n  };\n\n  return DefinitionAdapter;\n}();\n\nexport { DefinitionAdapter }; // --- references ------\n\nvar ReferenceAdapter =\n/** @class */\nfunction () {\n  function ReferenceAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.findReferences(resource.toString(), fromPosition(position));\n    }).then(function (entries) {\n      if (!entries) {\n        return;\n      }\n\n      return entries.map(toLocation);\n    });\n  };\n\n  return ReferenceAdapter;\n}();\n\nexport { ReferenceAdapter }; // --- rename ------\n\nfunction toWorkspaceEdit(edit) {\n  if (!edit || !edit.changes) {\n    return void 0;\n  }\n\n  var resourceEdits = [];\n\n  for (var uri in edit.changes) {\n    var _uri = Uri.parse(uri); // let edits: monaco.languages.TextEdit[] = [];\n\n\n    for (var _i = 0, _a = edit.changes[uri]; _i < _a.length; _i++) {\n      var e = _a[_i];\n      resourceEdits.push({\n        resource: _uri,\n        edit: {\n          range: toRange(e.range),\n          text: e.newText\n        }\n      });\n    }\n  }\n\n  return {\n    edits: resourceEdits\n  };\n}\n\nvar RenameAdapter =\n/** @class */\nfunction () {\n  function RenameAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.doRename(resource.toString(), fromPosition(position), newName);\n    }).then(function (edit) {\n      return toWorkspaceEdit(edit);\n    });\n  };\n\n  return RenameAdapter;\n}();\n\nexport { RenameAdapter }; // --- document symbols ------\n\nfunction toSymbolKind(kind) {\n  var mKind = monaco.languages.SymbolKind;\n\n  switch (kind) {\n    case cssService.SymbolKind.File:\n      return mKind.Array;\n\n    case cssService.SymbolKind.Module:\n      return mKind.Module;\n\n    case cssService.SymbolKind.Namespace:\n      return mKind.Namespace;\n\n    case cssService.SymbolKind.Package:\n      return mKind.Package;\n\n    case cssService.SymbolKind.Class:\n      return mKind.Class;\n\n    case cssService.SymbolKind.Method:\n      return mKind.Method;\n\n    case cssService.SymbolKind.Property:\n      return mKind.Property;\n\n    case cssService.SymbolKind.Field:\n      return mKind.Field;\n\n    case cssService.SymbolKind.Constructor:\n      return mKind.Constructor;\n\n    case cssService.SymbolKind.Enum:\n      return mKind.Enum;\n\n    case cssService.SymbolKind.Interface:\n      return mKind.Interface;\n\n    case cssService.SymbolKind.Function:\n      return mKind.Function;\n\n    case cssService.SymbolKind.Variable:\n      return mKind.Variable;\n\n    case cssService.SymbolKind.Constant:\n      return mKind.Constant;\n\n    case cssService.SymbolKind.String:\n      return mKind.String;\n\n    case cssService.SymbolKind.Number:\n      return mKind.Number;\n\n    case cssService.SymbolKind.Boolean:\n      return mKind.Boolean;\n\n    case cssService.SymbolKind.Array:\n      return mKind.Array;\n  }\n\n  return mKind.Function;\n}\n\nvar DocumentSymbolAdapter =\n/** @class */\nfunction () {\n  function DocumentSymbolAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.findDocumentSymbols(resource.toString());\n    }).then(function (items) {\n      if (!items) {\n        return;\n      }\n\n      return items.map(function (item) {\n        return {\n          name: item.name,\n          detail: '',\n          containerName: item.containerName,\n          kind: toSymbolKind(item.kind),\n          tags: [],\n          range: toRange(item.location.range),\n          selectionRange: toRange(item.location.range)\n        };\n      });\n    });\n  };\n\n  return DocumentSymbolAdapter;\n}();\n\nexport { DocumentSymbolAdapter };\n\nvar DocumentColorAdapter =\n/** @class */\nfunction () {\n  function DocumentColorAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  DocumentColorAdapter.prototype.provideDocumentColors = function (model, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.findDocumentColors(resource.toString());\n    }).then(function (infos) {\n      if (!infos) {\n        return;\n      }\n\n      return infos.map(function (item) {\n        return {\n          color: item.color,\n          range: toRange(item.range)\n        };\n      });\n    });\n  };\n\n  DocumentColorAdapter.prototype.provideColorPresentations = function (model, info, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.getColorPresentations(resource.toString(), info.color, fromRange(info.range));\n    }).then(function (presentations) {\n      if (!presentations) {\n        return;\n      }\n\n      return presentations.map(function (presentation) {\n        var item = {\n          label: presentation.label\n        };\n\n        if (presentation.textEdit) {\n          item.textEdit = toTextEdit(presentation.textEdit);\n        }\n\n        if (presentation.additionalTextEdits) {\n          item.additionalTextEdits = presentation.additionalTextEdits.map(toTextEdit);\n        }\n\n        return item;\n      });\n    });\n  };\n\n  return DocumentColorAdapter;\n}();\n\nexport { DocumentColorAdapter };\n\nvar FoldingRangeAdapter =\n/** @class */\nfunction () {\n  function FoldingRangeAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  FoldingRangeAdapter.prototype.provideFoldingRanges = function (model, context, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.getFoldingRanges(resource.toString(), context);\n    }).then(function (ranges) {\n      if (!ranges) {\n        return;\n      }\n\n      return ranges.map(function (range) {\n        var result = {\n          start: range.startLine + 1,\n          end: range.endLine + 1\n        };\n\n        if (typeof range.kind !== 'undefined') {\n          result.kind = toFoldingRangeKind(range.kind);\n        }\n\n        return result;\n      });\n    });\n  };\n\n  return FoldingRangeAdapter;\n}();\n\nexport { FoldingRangeAdapter };\n\nfunction toFoldingRangeKind(kind) {\n  switch (kind) {\n    case cssService.FoldingRangeKind.Comment:\n      return monaco.languages.FoldingRangeKind.Comment;\n\n    case cssService.FoldingRangeKind.Imports:\n      return monaco.languages.FoldingRangeKind.Imports;\n\n    case cssService.FoldingRangeKind.Region:\n      return monaco.languages.FoldingRangeKind.Region;\n  }\n}\n\nvar SelectionRangeAdapter =\n/** @class */\nfunction () {\n  function SelectionRangeAdapter(_worker) {\n    this._worker = _worker;\n  }\n\n  SelectionRangeAdapter.prototype.provideSelectionRanges = function (model, positions, token) {\n    var resource = model.uri;\n    return this._worker(resource).then(function (worker) {\n      return worker.getSelectionRanges(resource.toString(), positions.map(fromPosition));\n    }).then(function (selectionRanges) {\n      if (!selectionRanges) {\n        return;\n      }\n\n      return selectionRanges.map(function (selectionRange) {\n        var result = [];\n\n        while (selectionRange) {\n          result.push({\n            range: toRange(selectionRange.range)\n          });\n          selectionRange = selectionRange.parent;\n        }\n\n        return result;\n      });\n    });\n  };\n\n  return SelectionRangeAdapter;\n}();\n\nexport { SelectionRangeAdapter };","map":{"version":3,"sources":["/home/chaithra/Documents/customised/customised/node_modules/monaco-editor/esm/vs/language/css/languageFeatures.js"],"names":["cssService","Uri","monaco","Range","DiagnosticsAdapter","_languageId","_worker","defaults","_this","_disposables","_listener","Object","create","onModelAdd","model","modeId","getModeId","handle","uri","toString","onDidChangeContent","window","clearTimeout","setTimeout","_doValidate","onModelRemoved","editor","setModelMarkers","uriStr","listener","dispose","push","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","onDidChange","_","getModels","forEach","key","prototype","d","resource","languageId","then","worker","doValidation","diagnostics","markers","map","toDiagnostics","getModel","undefined","err","console","error","toSeverity","lsSeverity","DiagnosticSeverity","Error","MarkerSeverity","Warning","Information","Info","Hint","diag","code","String","severity","startLineNumber","range","start","line","startColumn","character","endLineNumber","end","endColumn","message","source","fromPosition","position","column","lineNumber","fromRange","toRange","toCompletionItemKind","kind","mItemKind","languages","CompletionItemKind","Text","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","Color","File","Reference","toTextEdit","textEdit","text","newText","CompletionAdapter","defineProperty","get","enumerable","configurable","provideCompletionItems","context","token","doComplete","info","wordInfo","getWordUntilPosition","wordRange","items","entry","item","label","insertText","sortText","filterText","documentation","detail","additionalTextEdits","insertTextFormat","InsertTextFormat","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","isIncomplete","suggestions","isMarkupContent","thing","toMarkdownString","value","replace","language","toMarkedStringArray","contents","Array","isArray","HoverAdapter","provideHover","doHover","toDocumentHighlightKind","DocumentHighlightKind","Read","Write","DocumentHighlightAdapter","provideDocumentHighlights","findDocumentHighlights","entries","toLocation","location","parse","DefinitionAdapter","provideDefinition","findDefinition","definition","ReferenceAdapter","provideReferences","findReferences","toWorkspaceEdit","edit","changes","resourceEdits","_uri","_i","_a","length","e","edits","RenameAdapter","provideRenameEdits","newName","doRename","toSymbolKind","mKind","SymbolKind","Namespace","Package","Constant","Number","Boolean","DocumentSymbolAdapter","provideDocumentSymbols","findDocumentSymbols","name","containerName","tags","selectionRange","DocumentColorAdapter","provideDocumentColors","findDocumentColors","infos","color","provideColorPresentations","getColorPresentations","presentations","presentation","FoldingRangeAdapter","provideFoldingRanges","getFoldingRanges","ranges","result","startLine","endLine","toFoldingRangeKind","FoldingRangeKind","Comment","Imports","Region","SelectionRangeAdapter","provideSelectionRanges","positions","getSelectionRanges","selectionRanges","parent"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport * as cssService from './_deps/vscode-css-languageservice/cssLanguageService.js';\r\nvar Uri = monaco.Uri;\r\nvar Range = monaco.Range;\r\n// --- diagnostics --- ---\r\nvar DiagnosticsAdapter = /** @class */ (function () {\r\n    function DiagnosticsAdapter(_languageId, _worker, defaults) {\r\n        var _this = this;\r\n        this._languageId = _languageId;\r\n        this._worker = _worker;\r\n        this._disposables = [];\r\n        this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            var modeId = model.getModeId();\r\n            if (modeId !== _this._languageId) {\r\n                return;\r\n            }\r\n            var handle;\r\n            _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\r\n                window.clearTimeout(handle);\r\n                handle = window.setTimeout(function () { return _this._doValidate(model.uri, modeId); }, 500);\r\n            });\r\n            _this._doValidate(model.uri, modeId);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            monaco.editor.setModelMarkers(model, _this._languageId, []);\r\n            var uriStr = model.uri.toString();\r\n            var listener = _this._listener[uriStr];\r\n            if (listener) {\r\n                listener.dispose();\r\n                delete _this._listener[uriStr];\r\n            }\r\n        };\r\n        this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\r\n        this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\r\n        this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        defaults.onDidChange(function (_) {\r\n            monaco.editor.getModels().forEach(function (model) {\r\n                if (model.getModeId() === _this._languageId) {\r\n                    onModelRemoved(model);\r\n                    onModelAdd(model);\r\n                }\r\n            });\r\n        });\r\n        this._disposables.push({\r\n            dispose: function () {\r\n                for (var key in _this._listener) {\r\n                    _this._listener[key].dispose();\r\n                }\r\n            }\r\n        });\r\n        monaco.editor.getModels().forEach(onModelAdd);\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\r\n        this._worker(resource).then(function (worker) {\r\n            return worker.doValidation(resource.toString());\r\n        }).then(function (diagnostics) {\r\n            var markers = diagnostics.map(function (d) { return toDiagnostics(resource, d); });\r\n            var model = monaco.editor.getModel(resource);\r\n            if (model.getModeId() === languageId) {\r\n                monaco.editor.setModelMarkers(model, languageId, markers);\r\n            }\r\n        }).then(undefined, function (err) {\r\n            console.error(err);\r\n        });\r\n    };\r\n    return DiagnosticsAdapter;\r\n}());\r\nexport { DiagnosticsAdapter };\r\nfunction toSeverity(lsSeverity) {\r\n    switch (lsSeverity) {\r\n        case cssService.DiagnosticSeverity.Error: return monaco.MarkerSeverity.Error;\r\n        case cssService.DiagnosticSeverity.Warning: return monaco.MarkerSeverity.Warning;\r\n        case cssService.DiagnosticSeverity.Information: return monaco.MarkerSeverity.Info;\r\n        case cssService.DiagnosticSeverity.Hint: return monaco.MarkerSeverity.Hint;\r\n        default:\r\n            return monaco.MarkerSeverity.Info;\r\n    }\r\n}\r\nfunction toDiagnostics(resource, diag) {\r\n    var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\r\n    return {\r\n        severity: toSeverity(diag.severity),\r\n        startLineNumber: diag.range.start.line + 1,\r\n        startColumn: diag.range.start.character + 1,\r\n        endLineNumber: diag.range.end.line + 1,\r\n        endColumn: diag.range.end.character + 1,\r\n        message: diag.message,\r\n        code: code,\r\n        source: diag.source\r\n    };\r\n}\r\n// --- completion ------\r\nfunction fromPosition(position) {\r\n    if (!position) {\r\n        return void 0;\r\n    }\r\n    return { character: position.column - 1, line: position.lineNumber - 1 };\r\n}\r\nfunction fromRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return { start: { line: range.startLineNumber - 1, character: range.startColumn - 1 }, end: { line: range.endLineNumber - 1, character: range.endColumn - 1 } };\r\n}\r\nfunction toRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return new monaco.Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\r\n}\r\nfunction toCompletionItemKind(kind) {\r\n    var mItemKind = monaco.languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case cssService.CompletionItemKind.Text: return mItemKind.Text;\r\n        case cssService.CompletionItemKind.Method: return mItemKind.Method;\r\n        case cssService.CompletionItemKind.Function: return mItemKind.Function;\r\n        case cssService.CompletionItemKind.Constructor: return mItemKind.Constructor;\r\n        case cssService.CompletionItemKind.Field: return mItemKind.Field;\r\n        case cssService.CompletionItemKind.Variable: return mItemKind.Variable;\r\n        case cssService.CompletionItemKind.Class: return mItemKind.Class;\r\n        case cssService.CompletionItemKind.Interface: return mItemKind.Interface;\r\n        case cssService.CompletionItemKind.Module: return mItemKind.Module;\r\n        case cssService.CompletionItemKind.Property: return mItemKind.Property;\r\n        case cssService.CompletionItemKind.Unit: return mItemKind.Unit;\r\n        case cssService.CompletionItemKind.Value: return mItemKind.Value;\r\n        case cssService.CompletionItemKind.Enum: return mItemKind.Enum;\r\n        case cssService.CompletionItemKind.Keyword: return mItemKind.Keyword;\r\n        case cssService.CompletionItemKind.Snippet: return mItemKind.Snippet;\r\n        case cssService.CompletionItemKind.Color: return mItemKind.Color;\r\n        case cssService.CompletionItemKind.File: return mItemKind.File;\r\n        case cssService.CompletionItemKind.Reference: return mItemKind.Reference;\r\n    }\r\n    return mItemKind.Property;\r\n}\r\nfunction toTextEdit(textEdit) {\r\n    if (!textEdit) {\r\n        return void 0;\r\n    }\r\n    return {\r\n        range: toRange(textEdit.range),\r\n        text: textEdit.newText\r\n    };\r\n}\r\nvar CompletionAdapter = /** @class */ (function () {\r\n    function CompletionAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return [' ', ':'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.doComplete(resource.toString(), fromPosition(position));\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var wordInfo = model.getWordUntilPosition(position);\r\n            var wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n            var items = info.items.map(function (entry) {\r\n                var item = {\r\n                    label: entry.label,\r\n                    insertText: entry.insertText || entry.label,\r\n                    sortText: entry.sortText,\r\n                    filterText: entry.filterText,\r\n                    documentation: entry.documentation,\r\n                    detail: entry.detail,\r\n                    range: wordRange,\r\n                    kind: toCompletionItemKind(entry.kind),\r\n                };\r\n                if (entry.textEdit) {\r\n                    item.range = toRange(entry.textEdit.range);\r\n                    item.insertText = entry.textEdit.newText;\r\n                }\r\n                if (entry.additionalTextEdits) {\r\n                    item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\r\n                }\r\n                if (entry.insertTextFormat === cssService.InsertTextFormat.Snippet) {\r\n                    item.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\r\n                }\r\n                return item;\r\n            });\r\n            return {\r\n                isIncomplete: info.isIncomplete,\r\n                suggestions: items\r\n            };\r\n        });\r\n    };\r\n    return CompletionAdapter;\r\n}());\r\nexport { CompletionAdapter };\r\nfunction isMarkupContent(thing) {\r\n    return thing && typeof thing === 'object' && typeof thing.kind === 'string';\r\n}\r\nfunction toMarkdownString(entry) {\r\n    if (typeof entry === 'string') {\r\n        return {\r\n            value: entry\r\n        };\r\n    }\r\n    if (isMarkupContent(entry)) {\r\n        if (entry.kind === 'plaintext') {\r\n            return {\r\n                value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\r\n            };\r\n        }\r\n        return {\r\n            value: entry.value\r\n        };\r\n    }\r\n    return { value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n' };\r\n}\r\nfunction toMarkedStringArray(contents) {\r\n    if (!contents) {\r\n        return void 0;\r\n    }\r\n    if (Array.isArray(contents)) {\r\n        return contents.map(toMarkdownString);\r\n    }\r\n    return [toMarkdownString(contents)];\r\n}\r\n// --- hover ------\r\nvar HoverAdapter = /** @class */ (function () {\r\n    function HoverAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    HoverAdapter.prototype.provideHover = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.doHover(resource.toString(), fromPosition(position));\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            return {\r\n                range: toRange(info.range),\r\n                contents: toMarkedStringArray(info.contents)\r\n            };\r\n        });\r\n    };\r\n    return HoverAdapter;\r\n}());\r\nexport { HoverAdapter };\r\n// --- document highlights ------\r\nfunction toDocumentHighlightKind(kind) {\r\n    switch (kind) {\r\n        case cssService.DocumentHighlightKind.Read: return monaco.languages.DocumentHighlightKind.Read;\r\n        case cssService.DocumentHighlightKind.Write: return monaco.languages.DocumentHighlightKind.Write;\r\n        case cssService.DocumentHighlightKind.Text: return monaco.languages.DocumentHighlightKind.Text;\r\n    }\r\n    return monaco.languages.DocumentHighlightKind.Text;\r\n}\r\nvar DocumentHighlightAdapter = /** @class */ (function () {\r\n    function DocumentHighlightAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentHighlightAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.findDocumentHighlights(resource.toString(), fromPosition(position));\r\n        }).then(function (entries) {\r\n            if (!entries) {\r\n                return;\r\n            }\r\n            return entries.map(function (entry) {\r\n                return {\r\n                    range: toRange(entry.range),\r\n                    kind: toDocumentHighlightKind(entry.kind)\r\n                };\r\n            });\r\n        });\r\n    };\r\n    return DocumentHighlightAdapter;\r\n}());\r\nexport { DocumentHighlightAdapter };\r\n// --- definition ------\r\nfunction toLocation(location) {\r\n    return {\r\n        uri: Uri.parse(location.uri),\r\n        range: toRange(location.range)\r\n    };\r\n}\r\nvar DefinitionAdapter = /** @class */ (function () {\r\n    function DefinitionAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.findDefinition(resource.toString(), fromPosition(position));\r\n        }).then(function (definition) {\r\n            if (!definition) {\r\n                return;\r\n            }\r\n            return [toLocation(definition)];\r\n        });\r\n    };\r\n    return DefinitionAdapter;\r\n}());\r\nexport { DefinitionAdapter };\r\n// --- references ------\r\nvar ReferenceAdapter = /** @class */ (function () {\r\n    function ReferenceAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.findReferences(resource.toString(), fromPosition(position));\r\n        }).then(function (entries) {\r\n            if (!entries) {\r\n                return;\r\n            }\r\n            return entries.map(toLocation);\r\n        });\r\n    };\r\n    return ReferenceAdapter;\r\n}());\r\nexport { ReferenceAdapter };\r\n// --- rename ------\r\nfunction toWorkspaceEdit(edit) {\r\n    if (!edit || !edit.changes) {\r\n        return void 0;\r\n    }\r\n    var resourceEdits = [];\r\n    for (var uri in edit.changes) {\r\n        var _uri = Uri.parse(uri);\r\n        // let edits: monaco.languages.TextEdit[] = [];\r\n        for (var _i = 0, _a = edit.changes[uri]; _i < _a.length; _i++) {\r\n            var e = _a[_i];\r\n            resourceEdits.push({\r\n                resource: _uri,\r\n                edit: {\r\n                    range: toRange(e.range),\r\n                    text: e.newText\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return {\r\n        edits: resourceEdits\r\n    };\r\n}\r\nvar RenameAdapter = /** @class */ (function () {\r\n    function RenameAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.doRename(resource.toString(), fromPosition(position), newName);\r\n        }).then(function (edit) {\r\n            return toWorkspaceEdit(edit);\r\n        });\r\n    };\r\n    return RenameAdapter;\r\n}());\r\nexport { RenameAdapter };\r\n// --- document symbols ------\r\nfunction toSymbolKind(kind) {\r\n    var mKind = monaco.languages.SymbolKind;\r\n    switch (kind) {\r\n        case cssService.SymbolKind.File: return mKind.Array;\r\n        case cssService.SymbolKind.Module: return mKind.Module;\r\n        case cssService.SymbolKind.Namespace: return mKind.Namespace;\r\n        case cssService.SymbolKind.Package: return mKind.Package;\r\n        case cssService.SymbolKind.Class: return mKind.Class;\r\n        case cssService.SymbolKind.Method: return mKind.Method;\r\n        case cssService.SymbolKind.Property: return mKind.Property;\r\n        case cssService.SymbolKind.Field: return mKind.Field;\r\n        case cssService.SymbolKind.Constructor: return mKind.Constructor;\r\n        case cssService.SymbolKind.Enum: return mKind.Enum;\r\n        case cssService.SymbolKind.Interface: return mKind.Interface;\r\n        case cssService.SymbolKind.Function: return mKind.Function;\r\n        case cssService.SymbolKind.Variable: return mKind.Variable;\r\n        case cssService.SymbolKind.Constant: return mKind.Constant;\r\n        case cssService.SymbolKind.String: return mKind.String;\r\n        case cssService.SymbolKind.Number: return mKind.Number;\r\n        case cssService.SymbolKind.Boolean: return mKind.Boolean;\r\n        case cssService.SymbolKind.Array: return mKind.Array;\r\n    }\r\n    return mKind.Function;\r\n}\r\nvar DocumentSymbolAdapter = /** @class */ (function () {\r\n    function DocumentSymbolAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.findDocumentSymbols(resource.toString()); }).then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return items.map(function (item) { return ({\r\n                name: item.name,\r\n                detail: '',\r\n                containerName: item.containerName,\r\n                kind: toSymbolKind(item.kind),\r\n                tags: [],\r\n                range: toRange(item.location.range),\r\n                selectionRange: toRange(item.location.range)\r\n            }); });\r\n        });\r\n    };\r\n    return DocumentSymbolAdapter;\r\n}());\r\nexport { DocumentSymbolAdapter };\r\nvar DocumentColorAdapter = /** @class */ (function () {\r\n    function DocumentColorAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentColorAdapter.prototype.provideDocumentColors = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.findDocumentColors(resource.toString()); }).then(function (infos) {\r\n            if (!infos) {\r\n                return;\r\n            }\r\n            return infos.map(function (item) { return ({\r\n                color: item.color,\r\n                range: toRange(item.range)\r\n            }); });\r\n        });\r\n    };\r\n    DocumentColorAdapter.prototype.provideColorPresentations = function (model, info, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getColorPresentations(resource.toString(), info.color, fromRange(info.range)); }).then(function (presentations) {\r\n            if (!presentations) {\r\n                return;\r\n            }\r\n            return presentations.map(function (presentation) {\r\n                var item = {\r\n                    label: presentation.label,\r\n                };\r\n                if (presentation.textEdit) {\r\n                    item.textEdit = toTextEdit(presentation.textEdit);\r\n                }\r\n                if (presentation.additionalTextEdits) {\r\n                    item.additionalTextEdits = presentation.additionalTextEdits.map(toTextEdit);\r\n                }\r\n                return item;\r\n            });\r\n        });\r\n    };\r\n    return DocumentColorAdapter;\r\n}());\r\nexport { DocumentColorAdapter };\r\nvar FoldingRangeAdapter = /** @class */ (function () {\r\n    function FoldingRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    FoldingRangeAdapter.prototype.provideFoldingRanges = function (model, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getFoldingRanges(resource.toString(), context); }).then(function (ranges) {\r\n            if (!ranges) {\r\n                return;\r\n            }\r\n            return ranges.map(function (range) {\r\n                var result = {\r\n                    start: range.startLine + 1,\r\n                    end: range.endLine + 1\r\n                };\r\n                if (typeof range.kind !== 'undefined') {\r\n                    result.kind = toFoldingRangeKind(range.kind);\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return FoldingRangeAdapter;\r\n}());\r\nexport { FoldingRangeAdapter };\r\nfunction toFoldingRangeKind(kind) {\r\n    switch (kind) {\r\n        case cssService.FoldingRangeKind.Comment: return monaco.languages.FoldingRangeKind.Comment;\r\n        case cssService.FoldingRangeKind.Imports: return monaco.languages.FoldingRangeKind.Imports;\r\n        case cssService.FoldingRangeKind.Region: return monaco.languages.FoldingRangeKind.Region;\r\n    }\r\n}\r\nvar SelectionRangeAdapter = /** @class */ (function () {\r\n    function SelectionRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    SelectionRangeAdapter.prototype.provideSelectionRanges = function (model, positions, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getSelectionRanges(resource.toString(), positions.map(fromPosition)); }).then(function (selectionRanges) {\r\n            if (!selectionRanges) {\r\n                return;\r\n            }\r\n            return selectionRanges.map(function (selectionRange) {\r\n                var result = [];\r\n                while (selectionRange) {\r\n                    result.push({ range: toRange(selectionRange.range) });\r\n                    selectionRange = selectionRange.parent;\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return SelectionRangeAdapter;\r\n}());\r\nexport { SelectionRangeAdapter };\r\n"]},"metadata":{},"sourceType":"module"}