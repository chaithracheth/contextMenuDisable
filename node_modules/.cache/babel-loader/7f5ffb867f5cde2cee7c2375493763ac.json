{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { DocumentHighlightKind, Location, Range, SymbolKind, TextEdit } from '../cssLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nimport * as nodes from '../parser/cssNodes.js';\nimport { Symbols } from '../parser/cssSymbolScope.js';\nimport { getColorValue, hslFromColor } from '../languageFacts/facts.js';\nimport { startsWith } from '../utils/strings.js';\nvar localize = nls.loadMessageBundle();\n\nvar CSSNavigation =\n/** @class */\nfunction () {\n  function CSSNavigation() {}\n\n  CSSNavigation.prototype.findDefinition = function (document, position, stylesheet) {\n    var symbols = new Symbols(stylesheet);\n    var offset = document.offsetAt(position);\n    var node = nodes.getNodeAtOffset(stylesheet, offset);\n\n    if (!node) {\n      return null;\n    }\n\n    var symbol = symbols.findSymbolFromNode(node);\n\n    if (!symbol) {\n      return null;\n    }\n\n    return {\n      uri: document.uri,\n      range: getRange(symbol.node, document)\n    };\n  };\n\n  CSSNavigation.prototype.findReferences = function (document, position, stylesheet) {\n    var highlights = this.findDocumentHighlights(document, position, stylesheet);\n    return highlights.map(function (h) {\n      return {\n        uri: document.uri,\n        range: h.range\n      };\n    });\n  };\n\n  CSSNavigation.prototype.findDocumentHighlights = function (document, position, stylesheet) {\n    var result = [];\n    var offset = document.offsetAt(position);\n    var node = nodes.getNodeAtOffset(stylesheet, offset);\n\n    if (!node || node.type === nodes.NodeType.Stylesheet || node.type === nodes.NodeType.Declarations) {\n      return result;\n    }\n\n    if (node.type === nodes.NodeType.Identifier && node.parent && node.parent.type === nodes.NodeType.ClassSelector) {\n      node = node.parent;\n    }\n\n    var symbols = new Symbols(stylesheet);\n    var symbol = symbols.findSymbolFromNode(node);\n    var name = node.getText();\n    stylesheet.accept(function (candidate) {\n      if (symbol) {\n        if (symbols.matchesSymbol(candidate, symbol)) {\n          result.push({\n            kind: getHighlightKind(candidate),\n            range: getRange(candidate, document)\n          });\n          return false;\n        }\n      } else if (node && node.type === candidate.type && candidate.matches(name)) {\n        // Same node type and data\n        result.push({\n          kind: getHighlightKind(candidate),\n          range: getRange(candidate, document)\n        });\n      }\n\n      return true;\n    });\n    return result;\n  };\n\n  CSSNavigation.prototype.isRawStringDocumentLinkNode = function (node) {\n    return node.type === nodes.NodeType.Import;\n  };\n\n  CSSNavigation.prototype.findDocumentLinks = function (document, stylesheet, documentContext) {\n    var _this = this;\n\n    var result = [];\n    stylesheet.accept(function (candidate) {\n      if (candidate.type === nodes.NodeType.URILiteral) {\n        var link = uriLiteralNodeToDocumentLink(document, candidate, documentContext);\n\n        if (link) {\n          result.push(link);\n        }\n\n        return false;\n      }\n      /**\n       * In @import, it is possible to include links that do not use `url()`\n       * For example, `@import 'foo.css';`\n       */\n\n\n      if (candidate.parent && _this.isRawStringDocumentLinkNode(candidate.parent)) {\n        var rawText = candidate.getText();\n\n        if (startsWith(rawText, \"'\") || startsWith(rawText, \"\\\"\")) {\n          var link = uriStringNodeToDocumentLink(document, candidate, documentContext);\n\n          if (link) {\n            result.push(link);\n          }\n        }\n\n        return false;\n      }\n\n      return true;\n    });\n    return result;\n  };\n\n  CSSNavigation.prototype.findDocumentLinks2 = function (document, stylesheet, documentContext) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.findDocumentLinks(document, stylesheet, documentContext)];\n      });\n    });\n  };\n\n  CSSNavigation.prototype.findDocumentSymbols = function (document, stylesheet) {\n    var result = [];\n    stylesheet.accept(function (node) {\n      var entry = {\n        name: null,\n        kind: SymbolKind.Class,\n        location: null\n      };\n      var locationNode = node;\n\n      if (node instanceof nodes.Selector) {\n        entry.name = node.getText();\n        locationNode = node.findAParent(nodes.NodeType.Ruleset, nodes.NodeType.ExtendsReference);\n\n        if (locationNode) {\n          entry.location = Location.create(document.uri, getRange(locationNode, document));\n          result.push(entry);\n        }\n\n        return false;\n      } else if (node instanceof nodes.VariableDeclaration) {\n        entry.name = node.getName();\n        entry.kind = SymbolKind.Variable;\n      } else if (node instanceof nodes.MixinDeclaration) {\n        entry.name = node.getName();\n        entry.kind = SymbolKind.Method;\n      } else if (node instanceof nodes.FunctionDeclaration) {\n        entry.name = node.getName();\n        entry.kind = SymbolKind.Function;\n      } else if (node instanceof nodes.Keyframe) {\n        entry.name = localize('literal.keyframes', \"@keyframes {0}\", node.getName());\n      } else if (node instanceof nodes.FontFace) {\n        entry.name = localize('literal.fontface', \"@font-face\");\n      } else if (node instanceof nodes.Media) {\n        var mediaList = node.getChild(0);\n\n        if (mediaList instanceof nodes.Medialist) {\n          entry.name = '@media ' + mediaList.getText();\n          entry.kind = SymbolKind.Module;\n        }\n      }\n\n      if (entry.name) {\n        entry.location = Location.create(document.uri, getRange(locationNode, document));\n        result.push(entry);\n      }\n\n      return true;\n    });\n    return result;\n  };\n\n  CSSNavigation.prototype.findDocumentColors = function (document, stylesheet) {\n    var result = [];\n    stylesheet.accept(function (node) {\n      var colorInfo = getColorInformation(node, document);\n\n      if (colorInfo) {\n        result.push(colorInfo);\n      }\n\n      return true;\n    });\n    return result;\n  };\n\n  CSSNavigation.prototype.getColorPresentations = function (document, stylesheet, color, range) {\n    var result = [];\n    var red256 = Math.round(color.red * 255),\n        green256 = Math.round(color.green * 255),\n        blue256 = Math.round(color.blue * 255);\n    var label;\n\n    if (color.alpha === 1) {\n      label = \"rgb(\" + red256 + \", \" + green256 + \", \" + blue256 + \")\";\n    } else {\n      label = \"rgba(\" + red256 + \", \" + green256 + \", \" + blue256 + \", \" + color.alpha + \")\";\n    }\n\n    result.push({\n      label: label,\n      textEdit: TextEdit.replace(range, label)\n    });\n\n    if (color.alpha === 1) {\n      label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256);\n    } else {\n      label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256) + toTwoDigitHex(Math.round(color.alpha * 255));\n    }\n\n    result.push({\n      label: label,\n      textEdit: TextEdit.replace(range, label)\n    });\n    var hsl = hslFromColor(color);\n\n    if (hsl.a === 1) {\n      label = \"hsl(\" + hsl.h + \", \" + Math.round(hsl.s * 100) + \"%, \" + Math.round(hsl.l * 100) + \"%)\";\n    } else {\n      label = \"hsla(\" + hsl.h + \", \" + Math.round(hsl.s * 100) + \"%, \" + Math.round(hsl.l * 100) + \"%, \" + hsl.a + \")\";\n    }\n\n    result.push({\n      label: label,\n      textEdit: TextEdit.replace(range, label)\n    });\n    return result;\n  };\n\n  CSSNavigation.prototype.doRename = function (document, position, newName, stylesheet) {\n    var _a;\n\n    var highlights = this.findDocumentHighlights(document, position, stylesheet);\n    var edits = highlights.map(function (h) {\n      return TextEdit.replace(h.range, newName);\n    });\n    return {\n      changes: (_a = {}, _a[document.uri] = edits, _a)\n    };\n  };\n\n  return CSSNavigation;\n}();\n\nexport { CSSNavigation };\n\nfunction getColorInformation(node, document) {\n  var color = getColorValue(node);\n\n  if (color) {\n    var range = getRange(node, document);\n    return {\n      color: color,\n      range: range\n    };\n  }\n\n  return null;\n}\n\nfunction uriLiteralNodeToDocumentLink(document, uriLiteralNode, documentContext) {\n  if (uriLiteralNode.getChildren().length === 0) {\n    return null;\n  }\n\n  var uriStringNode = uriLiteralNode.getChild(0);\n  return uriStringNodeToDocumentLink(document, uriStringNode, documentContext);\n}\n\nfunction uriStringNodeToDocumentLink(document, uriStringNode, documentContext) {\n  if (!uriStringNode) {\n    return null;\n  }\n\n  var rawUri = uriStringNode.getText();\n  var range = getRange(uriStringNode, document); // Make sure the range is not empty\n\n  if (range.start.line === range.end.line && range.start.character === range.end.character) {\n    return null;\n  }\n\n  if (startsWith(rawUri, \"'\") || startsWith(rawUri, \"\\\"\")) {\n    rawUri = rawUri.slice(1, -1);\n  }\n\n  var target;\n\n  if (startsWith(rawUri, 'http://') || startsWith(rawUri, 'https://')) {\n    target = rawUri;\n  } else if (/^\\w+:\\/\\//g.test(rawUri)) {\n    target = rawUri;\n  } else {\n    target = documentContext.resolveReference(rawUri, document.uri);\n  }\n\n  return {\n    range: range,\n    target: target\n  };\n}\n\nfunction getRange(node, document) {\n  return Range.create(document.positionAt(node.offset), document.positionAt(node.end));\n}\n\nfunction getHighlightKind(node) {\n  if (node.type === nodes.NodeType.Selector) {\n    return DocumentHighlightKind.Write;\n  }\n\n  if (node instanceof nodes.Identifier) {\n    if (node.parent && node.parent instanceof nodes.Property) {\n      if (node.isCustomProperty) {\n        return DocumentHighlightKind.Write;\n      }\n    }\n  }\n\n  if (node.parent) {\n    switch (node.parent.type) {\n      case nodes.NodeType.FunctionDeclaration:\n      case nodes.NodeType.MixinDeclaration:\n      case nodes.NodeType.Keyframe:\n      case nodes.NodeType.VariableDeclaration:\n      case nodes.NodeType.FunctionParameter:\n        return DocumentHighlightKind.Write;\n    }\n  }\n\n  return DocumentHighlightKind.Read;\n}\n\nfunction toTwoDigitHex(n) {\n  var r = n.toString(16);\n  return r.length !== 2 ? '0' + r : r;\n}","map":{"version":3,"sources":["/home/chaithra/Documents/customised/customised/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssNavigation.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","DocumentHighlightKind","Location","Range","SymbolKind","TextEdit","nls","nodes","Symbols","getColorValue","hslFromColor","startsWith","localize","loadMessageBundle","CSSNavigation","prototype","findDefinition","document","position","stylesheet","symbols","offset","offsetAt","node","getNodeAtOffset","symbol","findSymbolFromNode","uri","range","getRange","findReferences","highlights","findDocumentHighlights","map","h","type","NodeType","Stylesheet","Declarations","Identifier","parent","ClassSelector","name","getText","accept","candidate","matchesSymbol","kind","getHighlightKind","matches","isRawStringDocumentLinkNode","Import","findDocumentLinks","documentContext","_this","URILiteral","link","uriLiteralNodeToDocumentLink","rawText","uriStringNodeToDocumentLink","findDocumentLinks2","_a","findDocumentSymbols","entry","Class","location","locationNode","Selector","findAParent","Ruleset","ExtendsReference","create","VariableDeclaration","getName","Variable","MixinDeclaration","Method","FunctionDeclaration","Function","Keyframe","FontFace","Media","mediaList","getChild","Medialist","Module","findDocumentColors","colorInfo","getColorInformation","getColorPresentations","color","red256","Math","round","red","green256","green","blue256","blue","alpha","textEdit","replace","toTwoDigitHex","hsl","a","s","l","doRename","newName","edits","changes","uriLiteralNode","getChildren","uriStringNode","rawUri","start","line","end","character","slice","target","test","resolveReference","positionAt","Write","Property","isCustomProperty","FunctionParameter","Read","r","toString"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { DocumentHighlightKind, Location, Range, SymbolKind, TextEdit } from '../cssLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nimport * as nodes from '../parser/cssNodes.js';\nimport { Symbols } from '../parser/cssSymbolScope.js';\nimport { getColorValue, hslFromColor } from '../languageFacts/facts.js';\nimport { startsWith } from '../utils/strings.js';\nvar localize = nls.loadMessageBundle();\nvar CSSNavigation = /** @class */ (function () {\n    function CSSNavigation() {\n    }\n    CSSNavigation.prototype.findDefinition = function (document, position, stylesheet) {\n        var symbols = new Symbols(stylesheet);\n        var offset = document.offsetAt(position);\n        var node = nodes.getNodeAtOffset(stylesheet, offset);\n        if (!node) {\n            return null;\n        }\n        var symbol = symbols.findSymbolFromNode(node);\n        if (!symbol) {\n            return null;\n        }\n        return {\n            uri: document.uri,\n            range: getRange(symbol.node, document)\n        };\n    };\n    CSSNavigation.prototype.findReferences = function (document, position, stylesheet) {\n        var highlights = this.findDocumentHighlights(document, position, stylesheet);\n        return highlights.map(function (h) {\n            return {\n                uri: document.uri,\n                range: h.range\n            };\n        });\n    };\n    CSSNavigation.prototype.findDocumentHighlights = function (document, position, stylesheet) {\n        var result = [];\n        var offset = document.offsetAt(position);\n        var node = nodes.getNodeAtOffset(stylesheet, offset);\n        if (!node || node.type === nodes.NodeType.Stylesheet || node.type === nodes.NodeType.Declarations) {\n            return result;\n        }\n        if (node.type === nodes.NodeType.Identifier && node.parent && node.parent.type === nodes.NodeType.ClassSelector) {\n            node = node.parent;\n        }\n        var symbols = new Symbols(stylesheet);\n        var symbol = symbols.findSymbolFromNode(node);\n        var name = node.getText();\n        stylesheet.accept(function (candidate) {\n            if (symbol) {\n                if (symbols.matchesSymbol(candidate, symbol)) {\n                    result.push({\n                        kind: getHighlightKind(candidate),\n                        range: getRange(candidate, document)\n                    });\n                    return false;\n                }\n            }\n            else if (node && node.type === candidate.type && candidate.matches(name)) {\n                // Same node type and data\n                result.push({\n                    kind: getHighlightKind(candidate),\n                    range: getRange(candidate, document)\n                });\n            }\n            return true;\n        });\n        return result;\n    };\n    CSSNavigation.prototype.isRawStringDocumentLinkNode = function (node) {\n        return node.type === nodes.NodeType.Import;\n    };\n    CSSNavigation.prototype.findDocumentLinks = function (document, stylesheet, documentContext) {\n        var _this = this;\n        var result = [];\n        stylesheet.accept(function (candidate) {\n            if (candidate.type === nodes.NodeType.URILiteral) {\n                var link = uriLiteralNodeToDocumentLink(document, candidate, documentContext);\n                if (link) {\n                    result.push(link);\n                }\n                return false;\n            }\n            /**\n             * In @import, it is possible to include links that do not use `url()`\n             * For example, `@import 'foo.css';`\n             */\n            if (candidate.parent && _this.isRawStringDocumentLinkNode(candidate.parent)) {\n                var rawText = candidate.getText();\n                if (startsWith(rawText, \"'\") || startsWith(rawText, \"\\\"\")) {\n                    var link = uriStringNodeToDocumentLink(document, candidate, documentContext);\n                    if (link) {\n                        result.push(link);\n                    }\n                }\n                return false;\n            }\n            return true;\n        });\n        return result;\n    };\n    CSSNavigation.prototype.findDocumentLinks2 = function (document, stylesheet, documentContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.findDocumentLinks(document, stylesheet, documentContext)];\n            });\n        });\n    };\n    CSSNavigation.prototype.findDocumentSymbols = function (document, stylesheet) {\n        var result = [];\n        stylesheet.accept(function (node) {\n            var entry = {\n                name: null,\n                kind: SymbolKind.Class,\n                location: null\n            };\n            var locationNode = node;\n            if (node instanceof nodes.Selector) {\n                entry.name = node.getText();\n                locationNode = node.findAParent(nodes.NodeType.Ruleset, nodes.NodeType.ExtendsReference);\n                if (locationNode) {\n                    entry.location = Location.create(document.uri, getRange(locationNode, document));\n                    result.push(entry);\n                }\n                return false;\n            }\n            else if (node instanceof nodes.VariableDeclaration) {\n                entry.name = node.getName();\n                entry.kind = SymbolKind.Variable;\n            }\n            else if (node instanceof nodes.MixinDeclaration) {\n                entry.name = node.getName();\n                entry.kind = SymbolKind.Method;\n            }\n            else if (node instanceof nodes.FunctionDeclaration) {\n                entry.name = node.getName();\n                entry.kind = SymbolKind.Function;\n            }\n            else if (node instanceof nodes.Keyframe) {\n                entry.name = localize('literal.keyframes', \"@keyframes {0}\", node.getName());\n            }\n            else if (node instanceof nodes.FontFace) {\n                entry.name = localize('literal.fontface', \"@font-face\");\n            }\n            else if (node instanceof nodes.Media) {\n                var mediaList = node.getChild(0);\n                if (mediaList instanceof nodes.Medialist) {\n                    entry.name = '@media ' + mediaList.getText();\n                    entry.kind = SymbolKind.Module;\n                }\n            }\n            if (entry.name) {\n                entry.location = Location.create(document.uri, getRange(locationNode, document));\n                result.push(entry);\n            }\n            return true;\n        });\n        return result;\n    };\n    CSSNavigation.prototype.findDocumentColors = function (document, stylesheet) {\n        var result = [];\n        stylesheet.accept(function (node) {\n            var colorInfo = getColorInformation(node, document);\n            if (colorInfo) {\n                result.push(colorInfo);\n            }\n            return true;\n        });\n        return result;\n    };\n    CSSNavigation.prototype.getColorPresentations = function (document, stylesheet, color, range) {\n        var result = [];\n        var red256 = Math.round(color.red * 255), green256 = Math.round(color.green * 255), blue256 = Math.round(color.blue * 255);\n        var label;\n        if (color.alpha === 1) {\n            label = \"rgb(\" + red256 + \", \" + green256 + \", \" + blue256 + \")\";\n        }\n        else {\n            label = \"rgba(\" + red256 + \", \" + green256 + \", \" + blue256 + \", \" + color.alpha + \")\";\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, label) });\n        if (color.alpha === 1) {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256);\n        }\n        else {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256) + toTwoDigitHex(Math.round(color.alpha * 255));\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, label) });\n        var hsl = hslFromColor(color);\n        if (hsl.a === 1) {\n            label = \"hsl(\" + hsl.h + \", \" + Math.round(hsl.s * 100) + \"%, \" + Math.round(hsl.l * 100) + \"%)\";\n        }\n        else {\n            label = \"hsla(\" + hsl.h + \", \" + Math.round(hsl.s * 100) + \"%, \" + Math.round(hsl.l * 100) + \"%, \" + hsl.a + \")\";\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, label) });\n        return result;\n    };\n    CSSNavigation.prototype.doRename = function (document, position, newName, stylesheet) {\n        var _a;\n        var highlights = this.findDocumentHighlights(document, position, stylesheet);\n        var edits = highlights.map(function (h) { return TextEdit.replace(h.range, newName); });\n        return {\n            changes: (_a = {}, _a[document.uri] = edits, _a)\n        };\n    };\n    return CSSNavigation;\n}());\nexport { CSSNavigation };\nfunction getColorInformation(node, document) {\n    var color = getColorValue(node);\n    if (color) {\n        var range = getRange(node, document);\n        return { color: color, range: range };\n    }\n    return null;\n}\nfunction uriLiteralNodeToDocumentLink(document, uriLiteralNode, documentContext) {\n    if (uriLiteralNode.getChildren().length === 0) {\n        return null;\n    }\n    var uriStringNode = uriLiteralNode.getChild(0);\n    return uriStringNodeToDocumentLink(document, uriStringNode, documentContext);\n}\nfunction uriStringNodeToDocumentLink(document, uriStringNode, documentContext) {\n    if (!uriStringNode) {\n        return null;\n    }\n    var rawUri = uriStringNode.getText();\n    var range = getRange(uriStringNode, document);\n    // Make sure the range is not empty\n    if (range.start.line === range.end.line && range.start.character === range.end.character) {\n        return null;\n    }\n    if (startsWith(rawUri, \"'\") || startsWith(rawUri, \"\\\"\")) {\n        rawUri = rawUri.slice(1, -1);\n    }\n    var target;\n    if (startsWith(rawUri, 'http://') || startsWith(rawUri, 'https://')) {\n        target = rawUri;\n    }\n    else if (/^\\w+:\\/\\//g.test(rawUri)) {\n        target = rawUri;\n    }\n    else {\n        target = documentContext.resolveReference(rawUri, document.uri);\n    }\n    return {\n        range: range,\n        target: target\n    };\n}\nfunction getRange(node, document) {\n    return Range.create(document.positionAt(node.offset), document.positionAt(node.end));\n}\nfunction getHighlightKind(node) {\n    if (node.type === nodes.NodeType.Selector) {\n        return DocumentHighlightKind.Write;\n    }\n    if (node instanceof nodes.Identifier) {\n        if (node.parent && node.parent instanceof nodes.Property) {\n            if (node.isCustomProperty) {\n                return DocumentHighlightKind.Write;\n            }\n        }\n    }\n    if (node.parent) {\n        switch (node.parent.type) {\n            case nodes.NodeType.FunctionDeclaration:\n            case nodes.NodeType.MixinDeclaration:\n            case nodes.NodeType.Keyframe:\n            case nodes.NodeType.VariableDeclaration:\n            case nodes.NodeType.FunctionParameter:\n                return DocumentHighlightKind.Write;\n        }\n    }\n    return DocumentHighlightKind.Read;\n}\nfunction toTwoDigitHex(n) {\n    var r = n.toString(16);\n    return r.length !== 2 ? '0' + r : r;\n}\n"]},"metadata":{},"sourceType":"module"}